<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Main</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();setSynopsis("mini_Main.html");};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption empty">&nbsp;</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Copyright</th><td>Mariana Miranda &lt;a77782@alunos.uminho.pt&gt;;
           Helena Poleri &lt;a78633@alunos.uminho.pt&gt;</td></tr><tr><th>Safe Haskell</th><td>None</td></tr></table><p class="caption">Main</p></div><div id="table-of-contents"><p class="caption">Contents</p><ul><li><a href="#g:1">Fun&#231;&#227;o que cria o jogo.</a></li><li><a href="#g:2">Fun&#231;&#227;o que desenha o mapa</a></li><li><a href="#g:3">Fun&#231;&#227;o que reage a um evento (carregar numa tecla, mover o rato, etc)</a></li><li><a href="#g:4">Fun&#231;&#227;o que reage ao passar do tempo </a></li></ul></div><div id="description"><p class="caption">Description</p><div class="doc"><p>Tarefa 6 da 2&#170; Fase do projeto de LI1.</p></div></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><a href="#v:main">main</a> :: IO ()</li><li class="src short"><a href="#v:joga">joga</a> :: mundo -&gt; (mundo -&gt; IO Picture) -&gt; (Event -&gt; mundo -&gt; IO mundo) -&gt; (Float -&gt; mundo -&gt; mundo) -&gt; IO ()</li><li class="src short"><span class="keyword">data</span> <a href="#t:Mapa">Mapa</a> = <a href="#v:Mapa">Mapa</a> {<ul class="subs"><li><a href="#v:score">score</a> :: (Int, Int)</li><li><a href="#v:memoria">memoria</a> :: [[(Float, Float)]]</li><li><a href="#v:nome">nome</a> :: String</li><li><a href="#v:imagens">imagens</a> :: [Picture]</li><li><a href="#v:coord">coord</a> :: [(Float, Float)]</li><li><a href="#v:mapi">mapi</a> :: [String]</li><li><a href="#v:nivel">nivel</a> :: Int</li><li><a href="#v:tempo">tempo</a> :: (Int, Int)</li><li><a href="#v:sh">sh</a> :: Int</li></ul>}</li><li class="src short"><a href="#v:desenhaMapa">desenhaMapa</a> :: <a href="Main.html#t:Mapa">Mapa</a> -&gt; IO Picture</li><li class="src short"><a href="#v:reageEvento">reageEvento</a> :: Event -&gt; <a href="Main.html#t:Mapa">Mapa</a> -&gt; IO <a href="Main.html#t:Mapa">Mapa</a></li><li class="src short"><a href="#v:moveBoneco">moveBoneco</a> :: Char -&gt; <a href="Main.html#t:Mapa">Mapa</a> -&gt; <a href="Main.html#t:Mapa">Mapa</a></li><li class="src short"><a href="#v:move">move</a> :: Char -&gt; [(Float, Float)] -&gt; [String] -&gt; [(Float, Float)]</li><li class="src short"><a href="#v:moveCaixa">moveCaixa</a> :: (Float, Float) -&gt; (Float, Float) -&gt; [(Float, Float)] -&gt; [(Float, Float)]</li><li class="src short"><a href="#v:moveM">moveM</a> :: (Float, Float) -&gt; (Float, Float) -&gt; [(Float, Float)] -&gt; [String] -&gt; Bool</li><li class="src short"><a href="#v:restart">restart</a> :: <a href="Main.html#t:Mapa">Mapa</a> -&gt; <a href="Main.html#t:Mapa">Mapa</a></li><li class="src short"><a href="#v:undo">undo</a> :: <a href="Main.html#t:Mapa">Mapa</a> -&gt; <a href="Main.html#t:Mapa">Mapa</a></li><li class="src short"><a href="#v:name">name</a> :: Char -&gt; <a href="Main.html#t:Mapa">Mapa</a> -&gt; <a href="Main.html#t:Mapa">Mapa</a></li><li class="src short"><a href="#v:nextlevel">nextlevel</a> :: <a href="Main.html#t:Mapa">Mapa</a> -&gt; IO <a href="Main.html#t:Mapa">Mapa</a></li><li class="src short"><a href="#v:previouslevel">previouslevel</a> :: <a href="Main.html#t:Mapa">Mapa</a> -&gt; IO <a href="Main.html#t:Mapa">Mapa</a></li><li class="src short"><a href="#v:constroimapa">constroimapa</a> :: <a href="Main.html#t:Mapa">Mapa</a> -&gt; String -&gt; IO <a href="Main.html#t:Mapa">Mapa</a></li><li class="src short"><a href="#v:shuffle">shuffle</a> :: <a href="Main.html#t:Mapa">Mapa</a> -&gt; IO <a href="Main.html#t:Mapa">Mapa</a></li><li class="src short"><a href="#v:reageTempo">reageTempo</a> :: Float -&gt; <a href="Main.html#t:Mapa">Mapa</a> -&gt; <a href="Main.html#t:Mapa">Mapa</a></li><li class="src short"><a href="#v:inStr">inStr</a> :: String -&gt; [String]</li><li class="src short"><a href="#v:coordenadas">coordenadas</a> :: Char -&gt; [String] -&gt; [(Float, Float)]</li><li class="src short"><a href="#v:processaMapa">processaMapa</a> :: String -&gt; ([String], [(Float, Float)])</li><li class="src short"><a href="#v:parteMapa">parteMapa</a> :: [String] -&gt; ([String], [String])</li><li class="src short"><a href="#v:leCoordenadas">leCoordenadas</a> :: [String] -&gt; [(Float, Float)]</li><li class="src short"><a href="#v:rmov">rmov</a> :: [String] -&gt; [String]</li><li class="src short"><a href="#v:remove2">remove2</a> :: (Eq a, Num a) =&gt; Char -&gt; (a, Int) -&gt; [[Char]] -&gt; [Char]</li><li class="src short"><a href="#v:equiv">equiv</a> :: [(Float, Float)] -&gt; [(Float, Float)] -&gt; Bool</li><li class="src short"><a href="#v:maislindo">maislindo</a> :: String -&gt; String</li><li class="src short"><a href="#v:concluido">concluido</a> :: <a href="Main.html#t:Mapa">Mapa</a> -&gt; Bool</li><li class="src short"><a href="#v:worst">worst</a> :: <a href="Main.html#t:Mapa">Mapa</a> -&gt; Bool</li><li class="src short"><a href="#v:better">better</a> :: <a href="Main.html#t:Mapa">Mapa</a> -&gt; Bool</li><li class="src short"><a href="#v:tarefa1">tarefa1</a> :: IO Picture</li><li class="src short"><a href="#v:tarefa2">tarefa2</a> :: [String] -&gt; Int -&gt; IO Picture</li></ul></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><a name="v:main" class="def">main</a> :: IO ()</p><div class="doc"><p>Fun&#231;&#227;o principal que invoca o jogo.</p></div></div><h1 id="g:1">Fun&#231;&#227;o que cria o jogo.</h1><div class="top"><p class="src"><a name="v:joga" class="def">joga</a> :: mundo -&gt; (mundo -&gt; IO Picture) -&gt; (Event -&gt; mundo -&gt; IO mundo) -&gt; (Float -&gt; mundo -&gt; mundo) -&gt; IO ()</p><div class="doc"><p>Esta fun&#231;&#227;o interage com todos os componentes do jogo.</p></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a name="t:Mapa" class="def">Mapa</a></p><div class="doc"><p>Define o tipo de <code><a href="Main.html#t:Mapa">Mapa</a></code>, permitindo o uso de <em>Records</em>.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:Mapa" class="def">Mapa</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><dl><dt class="src"><a name="v:score" class="def">score</a> :: (Int, Int)</dt><dd class="doc empty">&nbsp;</dd><dt class="src"><a name="v:memoria" class="def">memoria</a> :: [[(Float, Float)]]</dt><dd class="doc empty">&nbsp;</dd><dt class="src"><a name="v:nome" class="def">nome</a> :: String</dt><dd class="doc empty">&nbsp;</dd><dt class="src"><a name="v:imagens" class="def">imagens</a> :: [Picture]</dt><dd class="doc empty">&nbsp;</dd><dt class="src"><a name="v:coord" class="def">coord</a> :: [(Float, Float)]</dt><dd class="doc empty">&nbsp;</dd><dt class="src"><a name="v:mapi" class="def">mapi</a> :: [String]</dt><dd class="doc empty">&nbsp;</dd><dt class="src"><a name="v:nivel" class="def">nivel</a> :: Int</dt><dd class="doc empty">&nbsp;</dd><dt class="src"><a name="v:tempo" class="def">tempo</a> :: (Int, Int)</dt><dd class="doc empty">&nbsp;</dd><dt class="src"><a name="v:sh" class="def">sh</a> :: Int</dt><dd class="doc empty">&nbsp;</dd></dl><div class="clear"></div></div></td></tr></table></div><div class="subs instances"><p id="control.i:Mapa" class="caption collapser" onclick="toggleSection('i:Mapa')">Instances</p><div id="section.i:Mapa" class="show"><table><tr><td class="src clearfix"><span class="inst-left">Eq <a href="Main.html#t:Mapa">Mapa</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left">Show <a href="Main.html#t:Mapa">Mapa</a></span></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><h1 id="g:2">Fun&#231;&#227;o que desenha o mapa</h1><div class="top"><p class="src"><a name="v:desenhaMapa" class="def">desenhaMapa</a> :: <a href="Main.html#t:Mapa">Mapa</a> -&gt; IO Picture</p><div class="doc"><p>Transforma o <code><a href="Main.html#t:Mapa">Mapa</a></code> numa IO Picture, ou seja, na sua representa&#231;&#227;o gr&#225;fica.</p></div></div><h1 id="g:3">Fun&#231;&#227;o que reage a um evento (carregar numa tecla, mover o rato, etc)</h1><div class="top"><p class="src"><a name="v:reageEvento" class="def">reageEvento</a> :: Event -&gt; <a href="Main.html#t:Mapa">Mapa</a> -&gt; IO <a href="Main.html#t:Mapa">Mapa</a></p><div class="doc"><p>Reage ao pressionar das setas do teclado, modificando o <code><a href="Main.html#t:Mapa">Mapa</a></code>, e por consequ&#234;ncia, a representa&#231;&#227;o gr&#225;fica. </p><h2>Fun&#231;&#245;es que controlam o movimento do boneco e das caixas.</h2></div></div><div class="top"><p class="src"><a name="v:moveBoneco" class="def">moveBoneco</a> :: Char -&gt; <a href="Main.html#t:Mapa">Mapa</a> -&gt; <a href="Main.html#t:Mapa">Mapa</a></p><div class="doc"><p>Esta fun&#231;&#227;o recebe um movimento e um <code><a href="Main.html#t:Mapa">Mapa</a></code> e retorna o <code><a href="Main.html#t:Mapa">Mapa</a></code> resultante desse movimento.</p></div></div><div class="top"><p class="src"><a name="v:move" class="def">move</a> :: Char -&gt; [(Float, Float)] -&gt; [String] -&gt; [(Float, Float)]</p><div class="doc"><p>A fun&#231;&#227;o <em>move</em> recebe um comando, as coordenadas do boneco e das caixas e o tabuleiro e devolve as coordendas do boneco e da caixas depois das altera&#231;&#245;es resultantes desse comando.</p></div></div><div class="top"><p class="src"><a name="v:moveCaixa" class="def">moveCaixa</a> :: (Float, Float) -&gt; (Float, Float) -&gt; [(Float, Float)] -&gt; [(Float, Float)]</p><div class="doc"><p>Conforme a posi&#231;&#227;o anterior e a atual do boneco verifica se houve movimento de uma caixa e devolve uma lista com as coordenadas novas das caixas.</p></div></div><div class="top"><p class="src"><a name="v:moveM" class="def">moveM</a> :: (Float, Float) -&gt; (Float, Float) -&gt; [(Float, Float)] -&gt; [String] -&gt; Bool</p><div class="doc"><p>Verifica se um determinado movimento &#233; poss&#237;vel.</p><h2>Fun&#231;&#227;o que permite fazer <em>restart</em>.</h2></div></div><div class="top"><p class="src"><a name="v:restart" class="def">restart</a> :: <a href="Main.html#t:Mapa">Mapa</a> -&gt; <a href="Main.html#t:Mapa">Mapa</a></p><div class="doc"><p>Esta fun&#231;&#227;o faz o jogo voltar ao seu estado inicial.</p><h2>Fun&#231;&#227;o que permite fazer <em>undo</em>.</h2></div></div><div class="top"><p class="src"><a name="v:undo" class="def">undo</a> :: <a href="Main.html#t:Mapa">Mapa</a> -&gt; <a href="Main.html#t:Mapa">Mapa</a></p><div class="doc"><p>Esta fun&#231;&#227;o faz o jogo retroceder uma jogada.</p><h2>Fun&#231;&#227;o que permite escrever o nome.</h2></div></div><div class="top"><p class="src"><a name="v:name" class="def">name</a> :: Char -&gt; <a href="Main.html#t:Mapa">Mapa</a> -&gt; <a href="Main.html#t:Mapa">Mapa</a></p><div class="doc"><p>Esta fun&#231;&#227;o permite escrever o nome se obtiver-se uma melhor pontua&#231;&#227;o.</p><h2>Fun&#231;&#245;es que permitem avan&#231;ar de nivel.</h2></div></div><div class="top"><p class="src"><a name="v:nextlevel" class="def">nextlevel</a> :: <a href="Main.html#t:Mapa">Mapa</a> -&gt; IO <a href="Main.html#t:Mapa">Mapa</a></p><div class="doc"><p>Constr&#243;i o n&#237;vel seguinte, exceto de se estiver no &#250;ltimo.</p></div></div><div class="top"><p class="src"><a name="v:previouslevel" class="def">previouslevel</a> :: <a href="Main.html#t:Mapa">Mapa</a> -&gt; IO <a href="Main.html#t:Mapa">Mapa</a></p><div class="doc"><p>Constr&#243;i o n&#237;vel anterior, exceto de se estiver no primeiro.</p></div></div><div class="top"><p class="src"><a name="v:constroimapa" class="def">constroimapa</a> :: <a href="Main.html#t:Mapa">Mapa</a> -&gt; String -&gt; IO <a href="Main.html#t:Mapa">Mapa</a></p><div class="doc"><p>Atrav&#234;s de um <code><a href="Main.html#t:Mapa">Mapa</a></code> e um ficheiro, contr&#243;i um novo n&#237;vel de acordo com a informa&#231;&#227;o desse ficheiro.</p><h2>Fun&#231;&#227;o que permite fazer <em>shuffle</em>.</h2></div></div><div class="top"><p class="src"><a name="v:shuffle" class="def">shuffle</a> :: <a href="Main.html#t:Mapa">Mapa</a> -&gt; IO <a href="Main.html#t:Mapa">Mapa</a></p><div class="doc"><p>A fun&#231;&#227;o escolhe aleatoriamente novos locais para as caixas, preservando aquelas que j&#225; est&#227;o num local de arruma&#231;&#227;o.</p></div></div><h1 id="g:4">Fun&#231;&#227;o que reage ao passar do tempo </h1><div class="top"><p class="src"><a name="v:reageTempo" class="def">reageTempo</a> :: Float -&gt; <a href="Main.html#t:Mapa">Mapa</a> -&gt; <a href="Main.html#t:Mapa">Mapa</a></p><div class="doc"><p>Esta fun&#231;&#227;o permite contabilizar oo tempo. </p><h1>Fun&#231;&#245;es auxiliares</h1></div></div><div class="top"><p class="src"><a name="v:inStr" class="def">inStr</a> :: String -&gt; [String]</p><div class="doc"><p>Esta fun&#231;&#227;o recebe uma string e transforma-a numa lista de strings, dividindo-a quando encontrar um <code><strong>'\n'</strong></code>.</p></div></div><div class="top"><p class="src"><a name="v:coordenadas" class="def">coordenadas</a> :: Char -&gt; [String] -&gt; [(Float, Float)]</p><div class="doc"><p>Recebe um caractere e um tabuleiro e devolve as coordenadas onde ocorre aquele caractere.</p></div></div><div class="top"><p class="src"><a name="v:processaMapa" class="def">processaMapa</a> :: String -&gt; ([String], [(Float, Float)])</p><div class="doc"><p>Fun&#231;&#227;o que recebe um ficheiro e processa-o de modo a ficar com um tuplo cujo o primeiro elemento &#233; o tabuleiro e o segundo as coordenadas.</p></div></div><div class="top"><p class="src"><a name="v:parteMapa" class="def">parteMapa</a> :: [String] -&gt; ([String], [String])</p><div class="doc"><p>Fun&#231;&#227;o que divide a parte das coordenadas da parte do tabuleiro.</p></div></div><div class="top"><p class="src"><a name="v:leCoordenadas" class="def">leCoordenadas</a> :: [String] -&gt; [(Float, Float)]</p><div class="doc"><p>Fun&#231;&#227;o que recebe a parte das coordenadas e as transforma para o formato (x,y).</p><pre> &gt;&gt;&gt; leCoordenadas [&quot;1 1&quot;,&quot;3 4&quot;]
[(1,1),(3,4)]
</pre></div></div><div class="top"><p class="src"><a name="v:rmov" class="def">rmov</a> :: [String] -&gt; [String]</p><div class="doc"><p>Retira os caracteres <code><strong>'#'</strong></code> que forem redundantes.</p><pre>&gt;&gt;&gt;  rmov  [&quot;##########&quot;,&quot;##     ###&quot;,&quot;## ###   #&quot;,&quot;#        #&quot;,&quot;# ..#   ##&quot;,&quot;##..#   ##&quot;,&quot;##########&quot;] [&quot;##########&quot;,&quot;##     ###&quot;,&quot;## ###   #&quot;,&quot;#        #&quot;,&quot;# ..#   ##&quot;,&quot;##..#   ##&quot;,&quot;##########&quot;]
[&quot; #######  &quot;,&quot; #     ###&quot;,&quot;## ###   #&quot;,&quot;#        #&quot;,&quot;# ..#   ##&quot;,&quot;##..#   # &quot;,&quot; ######## &quot;]
</pre></div></div><div class="top"><p class="src"><a name="v:remove2" class="def">remove2</a> :: (Eq a, Num a) =&gt; Char -&gt; (a, Int) -&gt; [[Char]] -&gt; [Char]</p><div class="doc"><p>Verifica se a remo&#231;&#227;o do caractere <code><strong>'#'</strong></code> &#233; poss&#237;vel. Caso seja poss&#237;vel, remove-o; caso contr&#225;rio, mant&#233;m-no.</p><pre>&gt;&gt;&gt;  remove2 '#' (1,1) [&quot;#####&quot;,&quot;## ##&quot;,&quot;#####&quot;] 
&quot;#&quot;
</pre><pre>&gt;&gt;&gt;  remove2 '#' (0,0) [&quot;#####&quot;,&quot;## ##&quot;,&quot;#####&quot;] 
&quot; &quot;
</pre></div></div><div class="top"><p class="src"><a name="v:equiv" class="def">equiv</a> :: [(Float, Float)] -&gt; [(Float, Float)] -&gt; Bool</p><div class="doc"><p>Verifica se duas listas de coordenadas s&#227;o iguais.</p></div></div><div class="top"><p class="src"><a name="v:maislindo" class="def">maislindo</a> :: String -&gt; String</p><div class="doc"><p>Adiciona <code><strong>'0'</strong></code> &#224; esquerda de um n&#250;mero para uniformizar a sua apresenta&#231;&#227;o.</p></div></div><div class="top"><p class="src"><a name="v:concluido" class="def">concluido</a> :: <a href="Main.html#t:Mapa">Mapa</a> -&gt; Bool</p><div class="doc"><p>Verfica se o jogo est&#225; completo, ou seja , concluido.</p></div></div><div class="top"><p class="src"><a name="v:worst" class="def">worst</a> :: <a href="Main.html#t:Mapa">Mapa</a> -&gt; Bool</p><div class="doc"><p>Verifica se teve uma pior presta&#231;&#227;o que um jogador anterior.</p></div></div><div class="top"><p class="src"><a name="v:better" class="def">better</a> :: <a href="Main.html#t:Mapa">Mapa</a> -&gt; Bool</p><div class="doc"><p>Verifica se teve uma melhor presta&#231;&#227;o que qualquer jogador anterior.</p></div></div><div class="top"><p class="src"><a name="v:tarefa1" class="def">tarefa1</a> :: IO Picture</p><div class="doc"><p>Cria a parte da interface gr&#225;fica que n&#227;o se altera no decorrer do jogo.</p></div></div><div class="top"><p class="src"><a name="v:tarefa2" class="def">tarefa2</a> :: [String] -&gt; Int -&gt; IO Picture</p><div class="doc"><p>Cria a parte da interface gr&#225;fica que apenas s&#243; se altera quando se muda de nivel.</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.16.1</p></div></body></html>