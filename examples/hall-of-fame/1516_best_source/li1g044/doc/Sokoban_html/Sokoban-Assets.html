<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Sokoban.Assets</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();setSynopsis("mini_Sokoban-Assets.html");};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption empty">&nbsp;</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Copyright</th><td>Alberto Faria &lt;albertofaria2@gmail.com&gt;;
              F&#225;bio Fontes &lt;fabio.4797@gmail.com&gt;</td></tr><tr><th>Safe Haskell</th><td>None</td></tr></table><p class="caption">Sokoban.Assets</p></div><div id="table-of-contents"><p class="caption">Contents</p><ul><li><a href="#g:1">Constantes</a></li><li><a href="#g:2">Assets</a><ul><li><a href="#g:3">Interface do Utilizador (UI)</a><ul><li><a href="#g:4">Carregamento</a></li></ul></li><li><a href="#g:5">Personagens</a><ul><li><a href="#g:6">Carregamento</a></li></ul></li><li><a href="#g:7">Tiles e Caixas</a><ul><li><a href="#g:8">Carregamento</a></li></ul></li></ul></li><li><a href="#g:9">Bitmaps</a><ul><li><a href="#g:10">Carregamento</a></li></ul></li><li><a href="#g:11">Sprites</a><ul><li><a href="#g:12">Carregamento</a></li></ul></li></ul></div><div id="description"><p class="caption">Description</p><div class="doc"><p>Este m&#243;dulo &#233; destinado ao carregamento e acesso a recursos externos utilizados
pelo jogo, e.g. imagens e tipos de letra.</p></div></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><a href="#v:uiDir">uiDir</a> :: FilePath</li><li class="src short"><a href="#v:fontDir">fontDir</a> :: FilePath</li><li class="src short"><a href="#v:playerDir">playerDir</a> :: FilePath</li><li class="src short"><a href="#v:themeDir">themeDir</a> :: FilePath</li><li class="src short"><span class="keyword">data</span> <a href="#t:Assets">Assets</a> = <a href="#v:Assets">Assets</a> {<ul class="subs"><li><a href="#v:assetsUI">assetsUI</a> :: <a href="Sokoban-Assets.html#t:UIAssets">UIAssets</a></li><li><a href="#v:assetsPlayers">assetsPlayers</a> :: <a href="Sokoban-Assets.html#t:PlayerAssets">PlayerAssets</a></li><li><a href="#v:assetsThemes">assetsThemes</a> :: [<a href="Sokoban-Assets.html#t:ThemeAssets">ThemeAssets</a>]</li></ul>}</li><li class="src short"><a href="#v:load">load</a> :: IO <a href="Sokoban-Assets.html#t:Assets">Assets</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:UIAssets">UIAssets</a> = <a href="#v:UIAssets">UIAssets</a> {<ul class="subs"><li><a href="#v:uiAssetsBitmaps">uiAssetsBitmaps</a> :: <a href="Sokoban-Assets.html#t:BitmapMap">BitmapMap</a></li><li><a href="#v:uiAssetsFont">uiAssetsFont</a> :: <a href="Sokoban-UI-Font.html#t:Font">Font</a></li></ul>}</li><li class="src short"><a href="#v:uiBitmap">uiBitmap</a> :: String -&gt; <a href="Sokoban-Assets.html#t:Assets">Assets</a> -&gt; Picture</li><li class="src short"><a href="#v:uiFont">uiFont</a> :: <a href="Sokoban-Assets.html#t:Assets">Assets</a> -&gt; <a href="Sokoban-UI-Font.html#t:Font">Font</a></li><li class="src short"><a href="#v:loadUI">loadUI</a> :: IO <a href="Sokoban-Assets.html#t:UIAssets">UIAssets</a></li><li class="src short"><span class="keyword">type</span> <a href="#t:PlayerAssets">PlayerAssets</a> = Map String <a href="Sokoban-Assets.html#t:BitmapMap">BitmapMap</a></li><li class="src short"><a href="#v:playerBitmap">playerBitmap</a> :: String -&gt; String -&gt; <a href="Sokoban-Assets.html#t:Assets">Assets</a> -&gt; Picture</li><li class="src short"><a href="#v:loadPlayers">loadPlayers</a> :: IO <a href="Sokoban-Assets.html#t:PlayerAssets">PlayerAssets</a></li><li class="src short"><a href="#v:loadPlayer">loadPlayer</a> :: FilePath -&gt; IO (String, <a href="Sokoban-Assets.html#t:BitmapMap">BitmapMap</a>)</li><li class="src short"><span class="keyword">newtype</span> <a href="#t:Theme">Theme</a> = <a href="#v:Theme">Theme</a> Int</li><li class="src short"><span class="keyword">data</span> <a href="#t:ThemeAssets">ThemeAssets</a> = <a href="#v:ThemeAssets">ThemeAssets</a> {<ul class="subs"><li><a href="#v:themeAssetsTiles">themeAssetsTiles</a> :: <a href="Sokoban-Assets.html#t:SpriteList">SpriteList</a></li><li><a href="#v:themeAssetsTarget">themeAssetsTarget</a> :: <a href="Sokoban-Assets.html#t:SpriteBitmaps">SpriteBitmaps</a></li><li><a href="#v:themeAssetsBox">themeAssetsBox</a> :: <a href="Sokoban-Assets.html#t:SpriteBitmaps">SpriteBitmaps</a></li></ul>}</li><li class="src short"><a href="#v:randomTheme">randomTheme</a> :: <a href="Sokoban-Assets.html#t:Assets">Assets</a> -&gt; IO <a href="Sokoban-Assets.html#t:Theme">Theme</a></li><li class="src short"><a href="#v:tileSprite">tileSprite</a> :: String -&gt; <a href="Sokoban-Assets.html#t:SpriteList">SpriteList</a> -&gt; <a href="Sokoban-Assets.html#t:SpriteList">SpriteList</a></li><li class="src short"><a href="#v:tileBitmap">tileBitmap</a> :: String -&gt; <a href="Sokoban-Assets.html#t:Theme">Theme</a> -&gt; <a href="Sokoban-Assets.html#t:Assets">Assets</a> -&gt; IO Picture</li><li class="src short"><a href="#v:targetBitmap">targetBitmap</a> :: <a href="Sokoban-Assets.html#t:Theme">Theme</a> -&gt; <a href="Sokoban-Assets.html#t:Assets">Assets</a> -&gt; IO Picture</li><li class="src short"><a href="#v:boxBitmap">boxBitmap</a> :: <a href="Sokoban-Assets.html#t:Theme">Theme</a> -&gt; <a href="Sokoban-Assets.html#t:Assets">Assets</a> -&gt; IO Picture</li><li class="src short"><a href="#v:loadThemes">loadThemes</a> :: IO [<a href="Sokoban-Assets.html#t:ThemeAssets">ThemeAssets</a>]</li><li class="src short"><a href="#v:loadTheme">loadTheme</a> :: FilePath -&gt; IO <a href="Sokoban-Assets.html#t:ThemeAssets">ThemeAssets</a></li><li class="src short"><a href="#v:checkTiles">checkTiles</a> :: String -&gt; <a href="Sokoban-Assets.html#t:SpriteList">SpriteList</a> -&gt; <a href="Sokoban-Assets.html#t:SpriteList">SpriteList</a></li><li class="src short"><a href="#v:checkTile">checkTile</a> :: String -&gt; <a href="Sokoban-Assets.html#t:Sprite">Sprite</a> -&gt; <a href="Sokoban-Assets.html#t:Sprite">Sprite</a></li><li class="src short"><a href="#v:themeError">themeError</a> :: String -&gt; String -&gt; a</li><li class="src short"><span class="keyword">type</span> <a href="#t:BitmapMap">BitmapMap</a> = Map String Picture</li><li class="src short"><span class="keyword">type</span> <a href="#t:NamedBitmap">NamedBitmap</a> = (String, Picture)</li><li class="src short"><a href="#v:loadBitmapsFromDir">loadBitmapsFromDir</a> :: FilePath -&gt; IO <a href="Sokoban-Assets.html#t:BitmapMap">BitmapMap</a></li><li class="src short"><a href="#v:loadBitmap">loadBitmap</a> :: FilePath -&gt; IO <a href="Sokoban-Assets.html#t:NamedBitmap">NamedBitmap</a></li><li class="src short"><span class="keyword">type</span> <a href="#t:SpriteList">SpriteList</a> = [<a href="Sokoban-Assets.html#t:Sprite">Sprite</a>]</li><li class="src short"><span class="keyword">type</span> <a href="#t:Sprite">Sprite</a> = (String, <a href="Sokoban-Assets.html#t:SpriteBitmaps">SpriteBitmaps</a>)</li><li class="src short"><span class="keyword">type</span> <a href="#t:SpriteBitmaps">SpriteBitmaps</a> = [(Int, Picture)]</li><li class="src short"><span class="keyword">type</span> <a href="#t:SpritePart">SpritePart</a> = (String, (Int, Picture))</li><li class="src short"><a href="#v:bitmapFromSprite">bitmapFromSprite</a> :: <a href="Sokoban-Assets.html#t:Sprite">Sprite</a> -&gt; IO Picture</li><li class="src short"><a href="#v:bitmapFromSpriteBitmaps">bitmapFromSpriteBitmaps</a> :: <a href="Sokoban-Assets.html#t:SpriteBitmaps">SpriteBitmaps</a> -&gt; IO Picture</li><li class="src short"><a href="#v:loadSpritesFromDir">loadSpritesFromDir</a> :: FilePath -&gt; IO <a href="Sokoban-Assets.html#t:SpriteList">SpriteList</a></li><li class="src short"><a href="#v:loadSprites">loadSprites</a> :: [FilePath] -&gt; IO <a href="Sokoban-Assets.html#t:SpriteList">SpriteList</a></li><li class="src short"><a href="#v:mergeSpriteParts">mergeSpriteParts</a> :: [<a href="Sokoban-Assets.html#t:SpritePart">SpritePart</a>] -&gt; <a href="Sokoban-Assets.html#t:SpriteList">SpriteList</a></li><li class="src short"><a href="#v:checkSprite">checkSprite</a> :: <a href="Sokoban-Assets.html#t:Sprite">Sprite</a> -&gt; <a href="Sokoban-Assets.html#t:Sprite">Sprite</a></li><li class="src short"><a href="#v:loadSpritePart">loadSpritePart</a> :: FilePath -&gt; IO <a href="Sokoban-Assets.html#t:SpritePart">SpritePart</a></li></ul></div><div id="interface"><h1 id="g:1">Constantes</h1><div class="doc"><p>Constantes utilizadas pelo m&#243;dulo.</p></div><div class="top"><p class="src"><a name="v:uiDir" class="def">uiDir</a> :: FilePath</p><div class="doc"><p>Caminho relativo da diretoria onde se encontram os bitmaps relativos &#224; UI.</p></div></div><div class="top"><p class="src"><a name="v:fontDir" class="def">fontDir</a> :: FilePath</p><div class="doc"><p>Caminho relativo da diretoria onde se encontram os ficheiros relativos ao
 tipo de letra utilizado pelo jogo.</p></div></div><div class="top"><p class="src"><a name="v:playerDir" class="def">playerDir</a> :: FilePath</p><div class="doc"><p>Caminho relativo da diretoria onde se encontram os bitmaps associados com
 cada personagem utilizados pelo jogo.</p></div></div><div class="top"><p class="src"><a name="v:themeDir" class="def">themeDir</a> :: FilePath</p><div class="doc"><p>Caminho relativo da diretoria onde se encontram os bitmaps associados com
 cada tema (aspeto gr&#225;fico do tabuleiro e caixas) utilizados pelo jogo.</p></div></div><h1 id="g:2">Assets</h1><div class="doc"><p>Tipos e fun&#231;&#245;es relacionados com assets em geral.</p><p>Define-se um asset como sendo um recurso externo, e.g. uma imagem.</p></div><div class="top"><p class="src"><span class="keyword">data</span> <a name="t:Assets" class="def">Assets</a></p><div class="doc"><p>Tipo <em>abstrato</em> que armazena todos os recursos externos utilizados pelo
 jogo.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:Assets" class="def">Assets</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><dl><dt class="src"><a name="v:assetsUI" class="def">assetsUI</a> :: <a href="Sokoban-Assets.html#t:UIAssets">UIAssets</a></dt><dd class="doc"><p>Assets relacionados com a UI.</p></dd><dt class="src"><a name="v:assetsPlayers" class="def">assetsPlayers</a> :: <a href="Sokoban-Assets.html#t:PlayerAssets">PlayerAssets</a></dt><dd class="doc"><p>Assets relacionados com as personagens.</p></dd><dt class="src"><a name="v:assetsThemes" class="def">assetsThemes</a> :: [<a href="Sokoban-Assets.html#t:ThemeAssets">ThemeAssets</a>]</dt><dd class="doc"><p>Assets relacionados com as tiles e
 caixas.</p></dd></dl><div class="clear"></div></div></td></tr></table></div></div><div class="top"><p class="src"><a name="v:load" class="def">load</a> :: IO <a href="Sokoban-Assets.html#t:Assets">Assets</a></p><div class="doc"><p>Carrega todos os assets dispon&#237;veis, a partir das diretorias predefinidas.</p></div></div><h2 id="g:3">Interface do Utilizador (UI)</h2><div class="doc"><p>Tipos e fun&#231;&#245;es relacionados com assets utilizados pela UI.</p></div><div class="top"><p class="src"><span class="keyword">data</span> <a name="t:UIAssets" class="def">UIAssets</a></p><div class="doc"><p>Armazena os bitmaps e o tipo de letra utilizados pela UI.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:UIAssets" class="def">UIAssets</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><dl><dt class="src"><a name="v:uiAssetsBitmaps" class="def">uiAssetsBitmaps</a> :: <a href="Sokoban-Assets.html#t:BitmapMap">BitmapMap</a></dt><dd class="doc"><p>Bitmaps utilizados pela UI.</p></dd><dt class="src"><a name="v:uiAssetsFont" class="def">uiAssetsFont</a> :: <a href="Sokoban-UI-Font.html#t:Font">Font</a></dt><dd class="doc"><p>Tipo de letra utilizado pela UI.</p></dd></dl><div class="clear"></div></div></td></tr></table></div></div><div class="top"><p class="src"><a name="v:uiBitmap" class="def">uiBitmap</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: String</td><td class="doc"><p>Nome do bitmap.</p></td></tr><tr><td class="src">-&gt; <a href="Sokoban-Assets.html#t:Assets">Assets</a></td><td class="doc"><p>Assets.</p></td></tr><tr><td class="src">-&gt; Picture</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Obt&#233;m um bitmap da UI.</p></div></div><div class="top"><p class="src"><a name="v:uiFont" class="def">uiFont</a> :: <a href="Sokoban-Assets.html#t:Assets">Assets</a> -&gt; <a href="Sokoban-UI-Font.html#t:Font">Font</a></p><div class="doc"><p>Obt&#233;m o tipo de letra da UI.</p></div></div><h3 id="g:4">Carregamento</h3><div class="doc"><p>Fun&#231;&#245;es relacionadas com o carregamento de assets da UI.</p></div><div class="top"><p class="src"><a name="v:loadUI" class="def">loadUI</a> :: IO <a href="Sokoban-Assets.html#t:UIAssets">UIAssets</a></p><div class="doc"><p>Carrega os bitmaps e o tipo de letra utilizados pela UI, a partir das
 diretorias predefinidas.</p></div></div><h2 id="g:5">Personagens</h2><div class="doc"><p>Tipos e fun&#231;&#245;es relacionados com assets utilizados pelas personagens.</p></div><div class="top"><p class="src"><span class="keyword">type</span> <a name="t:PlayerAssets" class="def">PlayerAssets</a> = Map String <a href="Sokoban-Assets.html#t:BitmapMap">BitmapMap</a></p><div class="doc"><p>Armazena os bitmaps utilizados pelas personagens.</p></div></div><div class="top"><p class="src"><a name="v:playerBitmap" class="def">playerBitmap</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: String</td><td class="doc"><p>Nome da personagem.</p></td></tr><tr><td class="src">-&gt; String</td><td class="doc"><p>Nome do bitmap.</p></td></tr><tr><td class="src">-&gt; <a href="Sokoban-Assets.html#t:Assets">Assets</a></td><td class="doc"><p>Assets.</p></td></tr><tr><td class="src">-&gt; Picture</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Obt&#233;m um bitmap de uma personagem.</p></div></div><h3 id="g:6">Carregamento</h3><div class="doc"><p>Fun&#231;&#245;es relacionadas com o carregamento de assets das personagens.</p></div><div class="top"><p class="src"><a name="v:loadPlayers" class="def">loadPlayers</a> :: IO <a href="Sokoban-Assets.html#t:PlayerAssets">PlayerAssets</a></p><div class="doc"><p>Carrega os bitmaps utilizados pelas personagens, a partir das diretorias
 predefinidas.</p></div></div><div class="top"><p class="src"><a name="v:loadPlayer" class="def">loadPlayer</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: FilePath</td><td class="doc"><p>Caminho da diretoria. Deve terminar
 com <code>'/'</code>.</p></td></tr><tr><td class="src">-&gt; IO (String, <a href="Sokoban-Assets.html#t:BitmapMap">BitmapMap</a>)</td><td class="doc"><p>(Nome da personagem, Bitmaps da
 personagem)</p></td></tr></table></div><div class="doc"><p>Carrega os bitmaps utilizados por uma personagem, a partir da diretoria
 especificada.</p></div></div><h2 id="g:7">Tiles e Caixas</h2><div class="doc"><p>Tipos e fun&#231;&#245;es relacionados com assets utilizados pelas tiles e caixas.</p><p>Uma tile &#233; uma das c&#233;lulas que constituem o tabuleiro de jogo e a respetiva
 imagem.</p></div><div class="top"><p class="src"><span class="keyword">newtype</span> <a name="t:Theme" class="def">Theme</a></p><div class="doc"><p>Tipo <em>abstrato</em> que dentifica um tema.</p><p>Os temas afetam o aspeto das tiles e das caixas utilizados para desenhar o
 tabuleiro de jogo. Cada tema &#233; constituido por uma s&#233;rie de sprites que s&#227;o
 utilizados para representar as tiles e as caixas.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:Theme" class="def">Theme</a> Int</td><td class="doc empty">&nbsp;</td></tr></table></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a name="t:ThemeAssets" class="def">ThemeAssets</a></p><div class="doc"><p>Armazena os sprites utilizados por cada tema.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:ThemeAssets" class="def">ThemeAssets</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><dl><dt class="src"><a name="v:themeAssetsTiles" class="def">themeAssetsTiles</a> :: <a href="Sokoban-Assets.html#t:SpriteList">SpriteList</a></dt><dd class="doc"><p>Sprites das tiles.</p></dd><dt class="src"><a name="v:themeAssetsTarget" class="def">themeAssetsTarget</a> :: <a href="Sokoban-Assets.html#t:SpriteBitmaps">SpriteBitmaps</a></dt><dd class="doc"><p>Sprite da tile para locais de
 arruma&#231;&#227;o.</p></dd><dt class="src"><a name="v:themeAssetsBox" class="def">themeAssetsBox</a> :: <a href="Sokoban-Assets.html#t:SpriteBitmaps">SpriteBitmaps</a></dt><dd class="doc"><p>Sprite para as caixas.</p></dd></dl><div class="clear"></div></div></td></tr></table></div></div><div class="top"><p class="src"><a name="v:randomTheme" class="def">randomTheme</a> :: <a href="Sokoban-Assets.html#t:Assets">Assets</a> -&gt; IO <a href="Sokoban-Assets.html#t:Theme">Theme</a></p><div class="doc"><p>Obt&#233;m um identificador de tema aleat&#243;rio, referente a um dos temas
 dispon&#237;veis no <code><a href="Sokoban-Assets.html#t:Assets">Assets</a></code> especificado.</p></div></div><div class="top"><p class="src"><a name="v:tileSprite" class="def">tileSprite</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: String</td><td class="doc"><p>Padr&#227;o a procurar.</p></td></tr><tr><td class="src">-&gt; <a href="Sokoban-Assets.html#t:SpriteList">SpriteList</a></td><td class="doc"><p>Lista de sprites a analisar.</p></td></tr><tr><td class="src">-&gt; <a href="Sokoban-Assets.html#t:SpriteList">SpriteList</a></td><td class="doc"><p>Lista de sprites resultante.</p></td></tr></table></div><div class="doc"><p>Devolve uma lista de todos os sprites de tiles que correspondem ao padr&#227;o
 especificado (cf. <code><a href="Sokoban-Assets.html#v:tileBitmap">tileBitmap</a></code>).</p></div></div><div class="top"><p class="src"><a name="v:tileBitmap" class="def">tileBitmap</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: String</td><td class="doc"><p>Padr&#227;o das c&#233;lulas.</p></td></tr><tr><td class="src">-&gt; <a href="Sokoban-Assets.html#t:Theme">Theme</a></td><td class="doc"><p>Identificador do tema a utilizar.</p></td></tr><tr><td class="src">-&gt; <a href="Sokoban-Assets.html#t:Assets">Assets</a></td><td class="doc"><p>Assets.</p></td></tr><tr><td class="src">-&gt; IO Picture</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Obt&#233;m um bitmap do sprite da tile correspondente ao padr&#227;o especificado.</p><p>O sprite que cada c&#233;lula do tabuleiro ter&#225; &#233; dependente da pr&#243;pria c&#233;lula e
 das 8 c&#233;lulas que a rodeiam. O padr&#227;o especificado deve descrever essas 9
 c&#233;lulas, linha por linha, numa string de 9 carateres. Os carateres permitidos
 s&#227;o os seguintes:</p><ul><li><code>'g'</code> - a c&#233;lula &#233; vazia ou &#233; um local de arruma&#231;&#227;o;</li><li><code>'w'</code> - a c&#233;lula &#233; uma parede.</li></ul><p>Exemplo: <code>&quot;gwgwwgwwg&quot;</code> corresponde &#224; seguinte disposi&#231;&#227;o de c&#233;lulas:</p><pre>gwg
wwg
wwg
</pre><p><strong>Nota:</strong> se a c&#233;lula central for um local de arruma&#231;&#227;o, deve ser utilizada a
 fun&#231;&#227;o <code><a href="Sokoban-Assets.html#v:targetBitmap">targetBitmap</a></code>.</p></div></div><div class="top"><p class="src"><a name="v:targetBitmap" class="def">targetBitmap</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="Sokoban-Assets.html#t:Theme">Theme</a></td><td class="doc"><p>Identificador do tema a utilizar.</p></td></tr><tr><td class="src">-&gt; <a href="Sokoban-Assets.html#t:Assets">Assets</a></td><td class="doc"><p>Assets.</p></td></tr><tr><td class="src">-&gt; IO Picture</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Obt&#233;m um bitmap do sprite da tile correspondente a um local de arruma&#231;&#227;o.</p></div></div><div class="top"><p class="src"><a name="v:boxBitmap" class="def">boxBitmap</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="Sokoban-Assets.html#t:Theme">Theme</a></td><td class="doc"><p>Identificador do tema a utilizar.</p></td></tr><tr><td class="src">-&gt; <a href="Sokoban-Assets.html#t:Assets">Assets</a></td><td class="doc"><p>Assets.</p></td></tr><tr><td class="src">-&gt; IO Picture</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Obt&#233;m um bitmap do sprite correspondente &#224;s caixas.</p></div></div><h3 id="g:8">Carregamento</h3><div class="doc"><p>Fun&#231;&#245;es relacionadas com o carregamento de assets das tiles e caixas.</p></div><div class="top"><p class="src"><a name="v:loadThemes" class="def">loadThemes</a> :: IO [<a href="Sokoban-Assets.html#t:ThemeAssets">ThemeAssets</a>]</p><div class="doc"><p>Carrega os assets utilizados pelos temas, a partir das diretorias
 predefinidas.</p></div></div><div class="top"><p class="src"><a name="v:loadTheme" class="def">loadTheme</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: FilePath</td><td class="doc"><p>Caminho da diretoria. Deve terminar
 com <code>'/'</code>.</p></td></tr><tr><td class="src">-&gt; IO <a href="Sokoban-Assets.html#t:ThemeAssets">ThemeAssets</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Carrega os assets utilizados por um tema, a partir da diretoria
 especificada.</p></div></div><div class="top"><p class="src"><a name="v:checkTiles" class="def">checkTiles</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: String</td><td class="doc"><p>Nome do tema.</p></td></tr><tr><td class="src">-&gt; <a href="Sokoban-Assets.html#t:SpriteList">SpriteList</a></td><td class="doc"><p>Lista de sprites a verificar.</p></td></tr><tr><td class="src">-&gt; <a href="Sokoban-Assets.html#t:SpriteList">SpriteList</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Verifica se uma lista de sprites representa corretamente um conjunto de
 tiles.</p><p>Se a lista for v&#225;lida, devolve a mesma lista; em caso contr&#225;rio, causa um
 erro.</p></div></div><div class="top"><p class="src"><a name="v:checkTile" class="def">checkTile</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: String</td><td class="doc"><p>Nome do tema.</p></td></tr><tr><td class="src">-&gt; <a href="Sokoban-Assets.html#t:Sprite">Sprite</a></td><td class="doc"><p>Sprite a verificar.</p></td></tr><tr><td class="src">-&gt; <a href="Sokoban-Assets.html#t:Sprite">Sprite</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Verifica se um sprite representa corretamente uma tile.</p><p>Se o sprite for v&#225;lido, devolve o mesmo sprite; em caso contr&#225;rio, causa um
 erro.</p></div></div><div class="top"><p class="src"><a name="v:themeError" class="def">themeError</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: String</td><td class="doc"><p>Nome do tema.</p></td></tr><tr><td class="src">-&gt; String</td><td class="doc"><p>Mensagem de erro.</p></td></tr><tr><td class="src">-&gt; a</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Causa um erro relacionado com o tema de nome especificado.</p></div></div><h1 id="g:9">Bitmaps</h1><div class="doc"><p>Tipos e fun&#231;&#245;es relacionados com bitmaps em geral.</p></div><div class="top"><p class="src"><span class="keyword">type</span> <a name="t:BitmapMap" class="def">BitmapMap</a> = Map String Picture</p><div class="doc"><p>Mapa que associa um nome a cada <code>Picture</code> que cont&#233;m um bitmap.</p></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a name="t:NamedBitmap" class="def">NamedBitmap</a> = (String, Picture)</p><div class="doc"><p>Tuplo que associa um nome a uma <code>Picture</code> que cont&#233;m um bitmap.</p></div></div><h2 id="g:10">Carregamento</h2><div class="doc"><p>Fun&#231;&#245;es relacionadas com o carregamento de bitmaps.</p></div><div class="top"><p class="src"><a name="v:loadBitmapsFromDir" class="def">loadBitmapsFromDir</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: FilePath</td><td class="doc"><p>Caminho da diretoria. Deve terminar com
 <code>'/'</code>.</p></td></tr><tr><td class="src">-&gt; IO <a href="Sokoban-Assets.html#t:BitmapMap">BitmapMap</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Carrega todos os bitmaps que se encontram na diretoria especificada.</p><p>S&#227;o considerados todos os ficheiros de extens&#227;o <code>.bmp</code>. As subdiretorias
 <em>n&#227;o</em> s&#227;o inclu&#237;das.</p><p>&#201; devolvido um mapa que associa um nome a cada bitmap. O nome de um bitmap
 corresponde ao nome do ficheiro <em>sem extens&#227;o</em> de onde foi carregado.</p></div></div><div class="top"><p class="src"><a name="v:loadBitmap" class="def">loadBitmap</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: FilePath</td><td class="doc"><p>Caminho do ficheiro a carregar.</p></td></tr><tr><td class="src">-&gt; IO <a href="Sokoban-Assets.html#t:NamedBitmap">NamedBitmap</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Carrega um bitmap a partir de um ficheiro.</p><p>&#201; devolvido um tuplo que associa um nome ao bitmap. O nome do bitmap
 corresponde ao nome do ficheiro <em>sem extens&#227;o</em>.</p></div></div><h1 id="g:11">Sprites</h1><div class="doc"><p>Tipos e fun&#231;&#245;es relacionados com sprites.</p><p>Define-se um sprite como sendo uma correspond&#234;ncia entre um nome e um
 conjunto de bitmaps, cada um com uma probabilidade associada. A soma das
 probabilidades de todos os bitmaps num sprite deve ser de <code>100%</code>.</p><p>Os sprites destinam-se a oferecer acesso aleat&#243;rio a um conjunto de bitmaps,
 dependente da probabilidade de cada bitmap.</p></div><div class="top"><p class="src"><span class="keyword">type</span> <a name="t:SpriteList" class="def">SpriteList</a> = [<a href="Sokoban-Assets.html#t:Sprite">Sprite</a>]</p><div class="doc"><p>Uma lista de sprites.</p></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a name="t:Sprite" class="def">Sprite</a> = (String, <a href="Sokoban-Assets.html#t:SpriteBitmaps">SpriteBitmaps</a>)</p><div class="doc"><p>Representa um sprite.</p><p>Associa um nome a uma lista de bitmaps, cada um com uma probabilidade
 associada.</p><p>A lista de bitmaps corresponde a uma lista de tuplos em que o
 primeiro elemento representa a probabilidade associada com um bitmap e o
 segundo elemento representa o bitmap. A probabilidade de cada bitmap deve ter
 um valor entre <code>1</code> e <code>100</code>, e a soma das probabilidades de todos os bitmaps
 deve ser <code>100</code>.</p><p>Os elementos da lista de tuplos devem estar ordenados por ordem crescente da
 probabilidade.</p></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a name="t:SpriteBitmaps" class="def">SpriteBitmaps</a> = [(Int, Picture)]</p><div class="doc"><p>Lista de bitmaps de um sprite (cf. <code><a href="Sokoban-Assets.html#t:Sprite">Sprite</a></code>).</p></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a name="t:SpritePart" class="def">SpritePart</a> = (String, (Int, Picture))</p><div class="doc"><p>Constitui uma parte de um sprite.</p><p>Associa um nome com uma probabilidade e um bitmap.</p><p>A probabilidade deve ter um valor entre <code>1</code> e <code>100</code>.</p></div></div><div class="top"><p class="src"><a name="v:bitmapFromSprite" class="def">bitmapFromSprite</a> :: <a href="Sokoban-Assets.html#t:Sprite">Sprite</a> -&gt; IO Picture</p><div class="doc"><p>Devolve aleatoriamente um dos bitmaps de um sprite.</p><p>&#201; tomada em considera&#231;&#227;o a probabilidade associada com cada bitmap.</p></div></div><div class="top"><p class="src"><a name="v:bitmapFromSpriteBitmaps" class="def">bitmapFromSpriteBitmaps</a> :: <a href="Sokoban-Assets.html#t:SpriteBitmaps">SpriteBitmaps</a> -&gt; IO Picture</p><div class="doc"><p>Devolve aleatoriamente um dos bitmaps de uma lista de bitmaps de um sprite.</p><p>&#201; tomada em considera&#231;&#227;o a probabilidade associada com cada bitmap.</p></div></div><h2 id="g:12">Carregamento</h2><div class="doc"><p>Fun&#231;&#245;es relacionadas com o carregamento de sprites.</p></div><div class="top"><p class="src"><a name="v:loadSpritesFromDir" class="def">loadSpritesFromDir</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: FilePath</td><td class="doc"><p>Caminho da diretoria. Deve terminar com
 <code>'/'</code>.</p></td></tr><tr><td class="src">-&gt; IO <a href="Sokoban-Assets.html#t:SpriteList">SpriteList</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Constr&#243;i uma lista de sprites a partir de todos os bitmaps que se encontram
 na diretoria especificada.</p><p>S&#227;o considerados todos os ficheiros de extens&#227;o <code>.bmp</code>. As subdiretorias
 <em>n&#227;o</em> s&#227;o inclu&#237;das.</p><p>Os nomes e bitmaps dos sprites resultantes s&#227;o calculados a partir dos nomes
 dos ficheiros carregados (cf. <code><a href="Sokoban-Assets.html#v:loadSpritePart">loadSpritePart</a></code>).</p></div></div><div class="top"><p class="src"><a name="v:loadSprites" class="def">loadSprites</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: [FilePath]</td><td class="doc"><p>Caminho dos ficheiros a carregar.</p></td></tr><tr><td class="src">-&gt; IO <a href="Sokoban-Assets.html#t:SpriteList">SpriteList</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Constr&#243;i uma lista de sprites a partir de todos os bitmaps especificados.</p><p>Os nomes e bitmaps dos sprites resultantes s&#227;o calculados a partir dos nomes
 dos ficheiros carregados (cf. <code><a href="Sokoban-Assets.html#v:loadSpritePart">loadSpritePart</a></code>).</p></div></div><div class="top"><p class="src"><a name="v:mergeSpriteParts" class="def">mergeSpriteParts</a> :: [<a href="Sokoban-Assets.html#t:SpritePart">SpritePart</a>] -&gt; <a href="Sokoban-Assets.html#t:SpriteList">SpriteList</a></p><div class="doc"><p>Contr&#243;i uma lista de sprites a partir de uma lista de valores do tipo
 <code><a href="Sokoban-Assets.html#t:SpritePart">SpritePart</a></code>.</p><p><code><code><a href="Sokoban-Assets.html#t:SpritePart">SpritePart</a></code>s</code> com o mesmo nome s&#227;o fundidas para formar um sprite.</p></div></div><div class="top"><p class="src"><a name="v:checkSprite" class="def">checkSprite</a> :: <a href="Sokoban-Assets.html#t:Sprite">Sprite</a> -&gt; <a href="Sokoban-Assets.html#t:Sprite">Sprite</a></p><div class="doc"><p>Verifica se a probabilidade total de um sprite &#233; de <code>100%</code>.</p><p>Se o sprite for v&#225;lido, devolve o mesmo sprite; em caso contr&#225;rio, causa um
 erro.</p></div></div><div class="top"><p class="src"><a name="v:loadSpritePart" class="def">loadSpritePart</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: FilePath</td><td class="doc"><p>Caminho do ficheiro a carregar.</p></td></tr><tr><td class="src">-&gt; IO <a href="Sokoban-Assets.html#t:SpritePart">SpritePart</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Carrega um valor do tipo <code><a href="Sokoban-Assets.html#t:SpritePart">SpritePart</a></code> a partir do ficheiro especificado.</p><p>O nome e probabilidade associados com a <code><a href="Sokoban-Assets.html#t:SpritePart">SpritePart</a></code> s&#227;o extra&#237;dos do nome do
 ficheiro, o qual deve seguir um formato espec&#237;fico:</p><pre>&lt;nome&gt;[.&lt;n&gt;_p&lt;prob&gt;].bmp</pre><ul><li><code>&lt;nome&gt;</code> - Nome da <code><a href="Sokoban-Assets.html#t:SpritePart">SpritePart</a></code>;</li><li><code>&lt;n&gt;</code> - Sequ&#234;ncia de carateres arbitr&#225;ria; diferencia entre ficheiros de
 sprites com o mesmo nome e probabilidade;</li><li><code>&lt;prob&gt;</code> - Probabilidade associada com a <code><a href="Sokoban-Assets.html#t:SpritePart">SpritePart</a></code>; inteiro entre <code>1</code>
 e <code>100</code>.</li></ul><p>Quando a parte opcional &#233; omitida, a <code><a href="Sokoban-Assets.html#t:SpritePart">SpritePart</a></code> toma uma probabilidade de
 <code>100%</code>.</p><p>Exemplos:</p><ul><li><code>imagem.bmp</code> - <code><a href="Sokoban-Assets.html#t:SpritePart">SpritePart</a></code> de nome <code>&quot;imagem&quot;</code> e probabilidade <code>100</code>;</li><li><code>ola.1_p17.bmp</code> - <code><a href="Sokoban-Assets.html#t:SpritePart">SpritePart</a></code> de nome <code>&quot;ola&quot;</code> e probabilidade <code>17</code>.</li></ul></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.16.1</p></div></body></html>