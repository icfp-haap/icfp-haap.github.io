<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Main</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();setSynopsis("mini_Main.html");};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption empty">&nbsp;</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Stability</th><td>Experimental</td></tr><tr><th>Safe Haskell</th><td>Safe</td></tr></table><p class="caption">Main</p></div><div id="description"><p class="caption">Description</p><div class="doc"><p>O objetivo desta tarefa &#233; implementar criar uma fun&#231;&#227;o que comprima o estado do jogo em uma <code>String</code> e outra que reverta o processo, ou seja, que , a partir da <code>String</code></p><p>resultante da codifica&#231;&#227;o, volte a construir a exata lista de <code>String</code> correspondente ao estado em que o jogo se encontrava. Quanto menor for a <code>String</code> resultante da</p><p>compress&#227;o, melhor, dado que se poupa mais informa&#231;&#227;o.</p></div></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><a href="#v:encode">encode</a> :: [String] -&gt; String</li><li class="src short"><a href="#v:decode">decode</a> :: String -&gt; [String]</li><li class="src short"><a href="#v:main">main</a> :: IO ()</li><li class="src short"><a href="#v:inserirPowerups">inserirPowerups</a> :: [String] -&gt; [String] -&gt; [String]</li><li class="src short"><a href="#v:tiraLinhas">tiraLinhas</a> :: [String] -&gt; String</li><li class="src short"><a href="#v:stringInfo">stringInfo</a> :: String -&gt; String</li><li class="src short"><a href="#v:stringMapa">stringMapa</a> :: String -&gt; String</li><li class="src short"><a href="#v:removeCard">removeCard</a> :: String -&gt; String</li><li class="src short"><a href="#v:removeVazios">removeVazios</a> :: String -&gt; Int -&gt; String</li><li class="src short"><a href="#v:encodeBricks">encodeBricks</a> :: String -&gt; String -&gt; String</li><li class="src short"><a href="#v:encodePadrao">encodePadrao</a> :: String -&gt; String</li><li class="src short"><a href="#v:encodePadrao2">encodePadrao2</a> :: String -&gt; String</li><li class="src short"><a href="#v:encodeInfo">encodeInfo</a> :: String -&gt; String</li><li class="src short"><a href="#v:decodeInfo">decodeInfo</a> :: String -&gt; String</li><li class="src short"><a href="#v:decodePadrao2">decodePadrao2</a> :: String -&gt; String</li><li class="src short"><a href="#v:decodePadrao">decodePadrao</a> :: String -&gt; String</li><li class="src short"><a href="#v:decodeBricks">decodeBricks</a> :: String -&gt; String</li><li class="src short"><a href="#v:addVazios">addVazios</a> :: String -&gt; String</li><li class="src short"><a href="#v:gerarMapaCard">gerarMapaCard</a> :: Int -&gt; Int -&gt; String</li><li class="src short"><a href="#v:fillMapaCard">fillMapaCard</a> :: String -&gt; String -&gt; String</li><li class="src short"><a href="#v:lilstring">lilstring</a> :: String -&gt; Int -&gt; [String]</li><li class="src short"><a href="#v:constroiMapa">constroiMapa</a> :: [String] -&gt; [String]</li><li class="src short"><a href="#v:unlineInfo">unlineInfo</a> :: String -&gt; String -&gt; [String]</li><li class="src short"><a href="#v:gerarInfoMapa1">gerarInfoMapa1</a> :: [String] -&gt; Int -&gt; [String]</li><li class="src short"><a href="#v:powersNumaString1">powersNumaString1</a> :: String -&gt; Int -&gt; Int -&gt; [String]</li><li class="src short"><a href="#v:gerarInfoMapa2">gerarInfoMapa2</a> :: [String] -&gt; Int -&gt; [String]</li><li class="src short"><a href="#v:powersNumaString2">powersNumaString2</a> :: String -&gt; Int -&gt; Int -&gt; [String]</li><li class="src short"><a href="#v:gerarInfoMapa3">gerarInfoMapa3</a> :: [String] -&gt; Int -&gt; [String]</li><li class="src short"><a href="#v:powersNumaString3">powersNumaString3</a> :: String -&gt; Int -&gt; Int -&gt; [String]</li><li class="src short"><a href="#v:unirBombas">unirBombas</a> :: [String] -&gt; Int -&gt; [String]</li><li class="src short"><a href="#v:procurarBomba">procurarBomba</a> :: String -&gt; [String] -&gt; Int -&gt; Int -&gt; String</li><li class="src short"><a href="#v:retirarPowerups">retirarPowerups</a> :: [String] -&gt; [String]</li><li class="src short"><a href="#v:subsPowerups">subsPowerups</a> :: String -&gt; String</li><li class="src short"><a href="#v:pOrden">pOrden</a> :: String -&gt; Int</li><li class="src short"><a href="#v:pAbcis">pAbcis</a> :: String -&gt; Int</li><li class="src short"><a href="#v:pAbcisSt">pAbcisSt</a> :: String -&gt; String</li><li class="src short"><a href="#v:pOrdenSt">pOrdenSt</a> :: String -&gt; String</li><li class="src short"><a href="#v:howMuch">howMuch</a> :: Char -&gt; String -&gt; Int</li></ul></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><a name="v:encode" class="def">encode</a> :: [String] -&gt; String</p><div class="doc"><p>A fun&#231;&#227;o <code>encode</code> divide a tarefa de comprimir o estado do mapa em duas partes. A primeira  &#233; de comprimir o mapa propriamente dito, a segunda &#233; decomprimir a </p><p>informa&#231;&#227;o das <code>Strings</code> abaixo do mapa, relativa a power ups, jogadores e bombas.</p><p>Outro pormenor da nossa fun&#231;&#227;o <code>encode</code> &#233; que guarda no in&#237;cio da <code>String</code> a dimens&#227;o do mapa, a fim de ser mais f&#225;cil de trabalhar na descodifica&#231;&#227;o desta <code>String</code>.</p></div></div><div class="top"><p class="src"><a name="v:decode" class="def">decode</a> :: String -&gt; [String]</p><div class="doc"><p>Como seria de esperar, a fun&#231;&#227;o <code>decode</code> &#233; fortemente influenciada pelo racioc&#237;nio e estrat&#233;gia adotados na encode, dado que tem de, de certa forma, realizar</p><p>o processo inverso. Assim, esta fun&#231;&#227;o tamb&#233;m divide o seu papel em duas partes, a de construir o mapa e a de acrescentar por baixo a informa&#231;&#227;o relativa a </p><p>power ups, bombas e jogadores.</p></div></div><div class="top"><p class="src"><a name="v:main" class="def">main</a> :: IO ()</p><div class="doc"><p>A fun&#231;&#227;o main recebe como input um estado do jogo (geralmente importado dos exemplos na pasta de testes atrav&#233;s do stdin) e um comando, -e para encode ou</p><ul><li>d para decode, que determinar&#227;o a fun&#231;&#227;o a utilizar na informa&#231;&#227;o importada. </li></ul></div></div><div class="top"><p class="src"><a name="v:inserirPowerups" class="def">inserirPowerups</a> :: [String] -&gt; [String] -&gt; [String]</p><div class="doc"><p>O primeiro passo da compress&#227;o &#233; a fun&#231;&#227;o <code>inserirPowerups</code> que insere no mapa os powerups (com caracteres diferentes caso estejam por baixo de tijolos ou </p><p>n&#227;o). Assim, n&#227;o h&#225; a necessidade de ter as <code>Strings</code> que se encontram depois do mapa, &#224; exce&#231;&#227;o de alguma informa&#231;&#227;o relativa a bombas e as <code>Strings</code> dos </p><p>jogadores, que n&#227;o inserimos no mapa por ser inc&#243;modo inserir d&#237;gitos no mapa, uma vez que utilizamos d&#237;gitos no nosso m&#233;todo de compress&#227;o.  </p></div></div><div class="top"><p class="src"><a name="v:tiraLinhas" class="def">tiraLinhas</a> :: [String] -&gt; String</p><div class="doc"><p>A fun&#231;&#227;o <code>tiralinhas</code> rempve as <code>Strings</code> com informa&#231;&#227;o relativa a powerups do mapa, e retira a informa&#231;&#227;o relativa &#224; posi&#231;&#227;o das bombas. </p></div></div><div class="top"><p class="src"><a name="v:stringInfo" class="def">stringInfo</a> :: String -&gt; String</p><div class="doc"><p>A fun&#231;&#227;o <code>stringinfo</code> recolhe a informa&#231;&#227;o que resta das bombas (em <code>strings</code> que deix&#225;mos com o <code>Char</code> <code>&gt;</code> in&#237;cio) e a informa&#231;&#227;o dos jogadores (em linhas </p><p>separadas por barras (<code>/</code>) ). </p></div></div><div class="top"><p class="src"><a name="v:stringMapa" class="def">stringMapa</a> :: String -&gt; String</p><div class="doc"><p>A fun&#231;&#227;o <code>stringMapa</code>, a partir de uma string com a informa&#231;&#227;o do mapa e a restande das bombas e jogadores, devolve apenas a parte relaiva ao mapa, que &#233; </p><p>processada por uma fun&#231;&#227;o diferente do resto.</p></div></div><div class="top"><p class="src"><a name="v:removeCard" class="def">removeCard</a> :: String -&gt; String</p><div class="doc"><p>Esta fun&#231;&#227;o retira os cardinais da string relativa ao mapa, uma vez que estes est&#227;o sempre nos mesmos s&#237;tios e os podemos recriar nas mesmas posi&#231;&#245;es.</p></div></div><div class="top"><p class="src"><a name="v:removeVazios" class="def">removeVazios</a> :: String -&gt; Int -&gt; String</p><div class="doc"><p>Esta fun&#231;&#227;o substitui os chars ' ' por n&#250;meros que representam a quantidade de espa&#231;os seguidos que se encontram nessa posi&#231;&#227;o da string.</p></div></div><div class="top"><p class="src"><a name="v:encodeBricks" class="def">encodeBricks</a> :: String -&gt; String -&gt; String</p><div class="doc"><p>Esta fun&#231;&#227;o procede da mesma forma que a <code>removeVazios</code>, mas para os tijolos (caracter <code>?</code>) e substitui os aglomerados destes mesmos caracteres por letras</p><p>(e.g. a=1, b=2, c=3 ...)</p></div></div><div class="top"><p class="src"><a name="v:encodePadrao" class="def">encodePadrao</a> :: String -&gt; String</p><div class="doc"><p>A fun&#231;&#227;o <code>encodePadr&#227;o</code>, dada a string resultante da compress&#227;o j&#225; feita, reconhece padr&#245;es de dois caracteres. A esses padr&#245;es faz corresponder uma letra </p><p>mai&#250;scula.</p></div></div><div class="top"><p class="src"><a name="v:encodePadrao2" class="def">encodePadrao2</a> :: String -&gt; String</p><div class="doc"><p>A fun&#231;&#227;o <code>encodePadrao2</code> procede das mesma forma que a <code>encodePadrao</code>, no entanto reconhece conjuntos de duas letras m&#225;i&#250;sculas e substitui-os por um s&#237;mbolo.</p></div></div><div class="top"><p class="src"><a name="v:encodeInfo" class="def">encodeInfo</a> :: String -&gt; String</p><div class="doc"><p>A fun&#231;&#227;o <code>encodeInfo</code> efetua um processo semelhante ao da <code>encodePadrao</code> mas destinado e adaptado &#224; informa&#231;&#227;o relativa a bombas e jogadores que n&#227;o foi </p><p>incluida no mapa. </p></div></div><div class="top"><p class="src"><a name="v:decodeInfo" class="def">decodeInfo</a> :: String -&gt; String</p><div class="doc"><p>A fun&#231;&#227;o <code>decodeInfo</code> faz a substitui&#231;&#227;o inversa da <code>encodeInfo</code>.</p></div></div><div class="top"><p class="src"><a name="v:decodePadrao2" class="def">decodePadrao2</a> :: String -&gt; String</p><div class="doc"><p>A fun&#231;&#227;o <code>decodePadrao2</code> efetua as substitui&#231;&#245;es inversas da <code>encodePadrao2</code></p></div></div><div class="top"><p class="src"><a name="v:decodePadrao" class="def">decodePadrao</a> :: String -&gt; String</p><div class="doc"><p>A fun&#231;&#227;o <code>decodePadrao</code> efetua as substitui&#231;&#245;es inversas da <code>encodePadrao</code>.</p></div></div><div class="top"><p class="src"><a name="v:decodeBricks" class="def">decodeBricks</a> :: String -&gt; String</p><div class="doc"><p>A fun&#231;&#227;o <code>decodeBricks</code> substitui os as letras que encontra pela quantidade de tijolos a que corresponde essa letra.</p></div></div><div class="top"><p class="src"><a name="v:addVazios" class="def">addVazios</a> :: String -&gt; String</p><div class="doc"><p>Esta fun&#231;&#227;o substitui os d&#237;gitos na string pela quantidade correspondente de espa&#231;os seguidos.</p></div></div><div class="top"><p class="src"><a name="v:gerarMapaCard" class="def">gerarMapaCard</a> :: Int -&gt; Int -&gt; String</p><div class="doc"><p>Esta fun&#231;&#227;o, a partir da dimens&#227;o do mapa (armazenada no inicio da string resultante da decode), gera um mapa vazio (apenas com os cardinais).</p></div></div><div class="top"><p class="src"><a name="v:fillMapaCard" class="def">fillMapaCard</a> :: String -&gt; String -&gt; String</p><div class="doc"><p>A fun&#231;&#227;o <code>fllMapaCard</code> procede &#224; substitui&#231;&#227;o dos espa&#231;os do mapa vazio em que n&#227;o h&#225; cardinais pelos caracteres da string a ser descodificada, cujo n&#250;mero de</p><p>elementos coincide com o n&#250;mero de caracteres que ser&#227;o precisos, naturalmente.</p></div></div><div class="top"><p class="src"><a name="v:lilstring" class="def">lilstring</a> :: String -&gt; Int -&gt; [String]</p><div class="doc"><p>A fun&#231;&#227;o <code>lilstring</code>, a partir de uma dimens&#227;o <strong>d</strong>, divide uma <code>String</code> numa lista de <strong>d</strong> strings, com <strong>d</strong> elementos cada uma.</p></div></div><div class="top"><p class="src"><a name="v:constroiMapa" class="def">constroiMapa</a> :: [String] -&gt; [String]</p><div class="doc"><p>A fun&#231;&#227;o <code>constroiMapa</code> gera o output final da <code>decode</code>, retirando os power ups e as bombas de dentro do mapa e registando a informa&#231;&#227;o relativa</p><p>aos mesmos em strings que o seguem, como num normal estado do mapa.</p></div></div><div class="top"><p class="src"><a name="v:unlineInfo" class="def">unlineInfo</a> :: String -&gt; String -&gt; [String]</p><div class="doc"><p>A fun&#231;&#227;o <code>unlineInfo</code>, a partir da string codificada separa a informa&#231;&#227;o relativa a cada bomba e a cada jogador, gerando uma lista de <code>Strings</code> que </p><p>serve para ser junta com a informa&#231;&#227;o retirada do mapa.</p></div></div><div class="top"><p class="src"><a name="v:gerarInfoMapa1" class="def">gerarInfoMapa1</a> :: [String] -&gt; Int -&gt; [String]</p><div class="doc"><p>Esta fun&#231;&#227;o tem como objetivo gerar uma lista de <code>Strings</code> com toda a informa&#231;&#227;o relativa aos power ups bombs, recorrendo a uma fun&#231;&#227;o auxiliar, que </p><p>concretiza este processo para cada linha.</p></div></div><div class="top"><p class="src"><a name="v:powersNumaString1" class="def">powersNumaString1</a> :: String -&gt; Int -&gt; Int -&gt; [String]</p><div class="doc"><p>Esta fun&#231;&#227;o serve de auxiliar &#224; <code>gerarInfoMapa1</code>, gerando tamb&#233;m uma lista de <code>Strings</code>, dado que podem haver v&#225;rios powerups numa linha.</p></div></div><div class="top"><p class="src"><a name="v:gerarInfoMapa2" class="def">gerarInfoMapa2</a> :: [String] -&gt; Int -&gt; [String]</p><div class="doc"><p>Esta fun&#231;&#227;o &#233; exatamente igual &#224; <code>gerarInfoMapa1</code>, no entanto trata dos power ups flames. Procedemos desta forma, porque os powerups t&#234;m de surgir </p><p>organizados no mapa (primeiro bombs, depois flames) </p></div></div><div class="top"><p class="src"><a name="v:powersNumaString2" class="def">powersNumaString2</a> :: String -&gt; Int -&gt; Int -&gt; [String]</p><div class="doc"><p>Fun&#231;&#227;o que serve de auziliar &#224; <code>gerarInfoMapa2</code> . </p></div></div><div class="top"><p class="src"><a name="v:gerarInfoMapa3" class="def">gerarInfoMapa3</a> :: [String] -&gt; Int -&gt; [String]</p><div class="doc"><p>Outra fun&#231;&#227;o semelhante &#224; <code>gerarInfoMapa1</code>, que trata da informa&#231;&#227;o relativa a bombas.</p></div></div><div class="top"><p class="src"><a name="v:powersNumaString3" class="def">powersNumaString3</a> :: String -&gt; Int -&gt; Int -&gt; [String]</p><div class="doc"><p>Esta fun&#231;&#227;o gera informa&#231;&#227;o relativa &#224;s bombas que se encontrem numa dad string do mapa. </p></div></div><div class="top"><p class="src"><a name="v:unirBombas" class="def">unirBombas</a> :: [String] -&gt; Int -&gt; [String]</p><div class="doc"><p>A fun&#231;&#227;o unir bombas aproveita a informa&#231;&#227;o recuperada das bombas colocadas no mapa e volta a unir essas <code>Strings</code> com as relativas &#224; informa&#231;&#227;o </p><p>alheia &#224; localiza&#231;&#227;o das bombas, que foram deiixadas de fora.</p></div></div><div class="top"><p class="src"><a name="v:procurarBomba" class="def">procurarBomba</a> :: String -&gt; [String] -&gt; Int -&gt; Int -&gt; String</p><div class="doc"><p>A fun&#231;&#227;o <code>procurarBomba</code>  percorre o mapa em busca da string com a informa&#231;&#227;o restante de cada bomba que &#233; retirada do mapa.</p></div></div><div class="top"><p class="src"><a name="v:retirarPowerups" class="def">retirarPowerups</a> :: [String] -&gt; [String]</p><div class="doc"><p>A fun&#231;&#227;o <code>retirarPowerups</code> percorre o mapa e chama uma fun&#231;&#227;o que retira os caracteres dos powerups de cada <code>String</code>.</p></div></div><div class="top"><p class="src"><a name="v:subsPowerups" class="def">subsPowerups</a> :: String -&gt; String</p><div class="doc"><p>Esta fun&#231;&#227;o percorre uma string e substitui qualquer caracter relativo a power ups pelo caracter que l&#225; se encontrava inicialmente, o que &#233;</p><p>poss&#237;vel porque definimos caracteres diferentes para power ups debaixo de tijolos e power ups destapados. </p></div></div><div class="top"><p class="src"><a name="v:pOrden" class="def">pOrden</a> :: String -&gt; Int</p><div class="doc"><p>Esta fun&#231;&#227;o converte a <code>String</code> relativa &#224; ordenada de um objeto num <code>Int</code>, para ser mais c&#243;modo trabalhar com esta informa&#231;&#227;o. </p></div></div><div class="top"><p class="src"><a name="v:pAbcis" class="def">pAbcis</a> :: String -&gt; Int</p><div class="doc"><p>Esta fun&#231;&#227;o converte a <code>String</code> relativa &#224; abcissa de um objeto num <code>Int</code>, para ser mais c&#243;modo trabalhar com esta informa&#231;&#227;o. </p></div></div><div class="top"><p class="src"><a name="v:pAbcisSt" class="def">pAbcisSt</a> :: String -&gt; String</p><div class="doc"><p>Esta fun&#231;&#227;o, a partir de uma <code>String</code> relativa a um dado objeto (jogador, power up, bomba..), a parte que corresponde &#224; abcissa da posi&#231;&#227;o desse objeto</p><p>no mapa. </p></div></div><div class="top"><p class="src"><a name="v:pOrdenSt" class="def">pOrdenSt</a> :: String -&gt; String</p><div class="doc"><p>Esta fun&#231;&#227;o, a partir de uma <code>String</code> relativa a um dado objeto (jogador, power up, bomba..), a parte que corresponde &#224; ordenada da posi&#231;&#227;o desse objeto</p><p>no mapa. </p></div></div><div class="top"><p class="src"><a name="v:howMuch" class="def">howMuch</a> :: Char -&gt; String -&gt; Int</p><div class="doc"><p>Esta fun&#231;&#227;o faz corresponder a uma letra do alfabeto (min&#250;scula) o n&#250;mero da sua ordem no alfabeto (e.g. a=1, b=2, c=3...). </p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.16.1</p></div></body></html>