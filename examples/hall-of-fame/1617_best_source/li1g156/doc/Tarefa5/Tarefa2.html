<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Tarefa2</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();setSynopsis("mini_Tarefa2.html");};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption empty">&nbsp;</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Stability</th><td>Experimental</td></tr><tr><th>Safe Haskell</th><td>Safe</td></tr></table><p class="caption">Tarefa2</p></div><div id="description"><p class="caption">Description</p><div class="doc"><p>O objetivo desta tarefa &#233; implementar um sistema de rea&#231;&#227;o a comandos, que dado um n&#250;mero de um jogador e um movimento, retorne o estado do mapa ap&#243;s</p><p>esse moviment ter sido efetuado ou o mesmo estado do jogo, no caso de a jogada n&#227;o ter sido poss&#237;vel.</p></div></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><a href="#v:move">move</a> :: [String] -&gt; Int -&gt; Char -&gt; [String]</li><li class="src short"><a href="#v:tarefa2">tarefa2</a> :: IO ()</li><li class="src short"><a href="#v:possibleM">possibleM</a> :: [String] -&gt; Char -&gt; Bool</li><li class="src short"><a href="#v:bombaSpot">bombaSpot</a> :: [String] -&gt; String -&gt; Bool</li><li class="src short"><a href="#v:numeroBombasP">numeroBombasP</a> :: [String] -&gt; String -&gt; Int</li><li class="src short"><a href="#v:replaceRows">replaceRows</a> :: [String] -&gt; Char -&gt; [String]</li><li class="src short"><a href="#v:pOrden">pOrden</a> :: String -&gt; Int</li><li class="src short"><a href="#v:pAbcis">pAbcis</a> :: String -&gt; Int</li><li class="src short"><a href="#v:pAbcisSt">pAbcisSt</a> :: String -&gt; String</li><li class="src short"><a href="#v:pOrdenSt">pOrdenSt</a> :: String -&gt; String</li><li class="src short"><a href="#v:right">right</a> :: String -&gt; String</li><li class="src short"><a href="#v:left">left</a> :: String -&gt; String</li><li class="src short"><a href="#v:up">up</a> :: String -&gt; String</li><li class="src short"><a href="#v:down">down</a> :: String -&gt; String</li><li class="src short"><a href="#v:bomb">bomb</a> :: [String] -&gt; String -&gt; [String]</li><li class="src short"><a href="#v:bombSt">bombSt</a> :: String -&gt; String</li><li class="src short"><a href="#v:numeroVezes">numeroVezes</a> :: Char -&gt; String -&gt; Int</li><li class="src short"><a href="#v:removePowers">removePowers</a> :: [String] -&gt; String -&gt; [String]</li><li class="src short"><a href="#v:isPower">isPower</a> :: [String] -&gt; String -&gt; Char</li><li class="src short"><a href="#v:addPower">addPower</a> :: Char -&gt; String -&gt; String</li><li class="src short"><a href="#v:startPowers">startPowers</a> :: String -&gt; Int</li></ul></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><a name="v:move" class="def">move</a> :: [String] -&gt; Int -&gt; Char -&gt; [String]</p><div class="doc"><p>A fun&#231;&#227;o move recebe um estado de jogo, um <code>Int</code> e um <code>Char</code>, que indicam o jogador e ajogada pretendida, respetivamente. Ao prcorrer a lista de</p><p><code>Strings</code> correspondente ao estado do jogo, a fun&#231;&#227;o verifica qual string &#233; a correspondente ao jogador no argumento, para depois utilizar essa</p><p>informa&#231;&#227;o nas suas fun&#231;&#245;es auxiliares. S uma dada jgada &#233; poss&#237;vel, ent&#227;o o mapa &#233; reescrito.</p></div></div><div class="top"><p class="src"><a name="v:tarefa2" class="def">tarefa2</a> :: IO ()</p><div class="doc"><p>A fun&#231;&#227;o main recebe dois como input os argumentos relativos ao jogador e &#224; jogada, chamando a fun&#231;&#227;o <code>move</code>, aqui definida, com esses mesmos argumentos.</p></div></div><div class="top"><p class="src"><a name="v:possibleM" class="def">possibleM</a> :: [String] -&gt; Char -&gt; Bool</p><div class="doc"><p>A fun&#231;&#227;o possibleM verifica se uma dada jogada, para uma dada lista de <code>Strings</code>, em que a &#250;ltima <code>String</code> &#233; a correspondente ao jogador que</p><p>quer efetuar a jogada, &#233; poss&#237;vel. </p></div></div><div class="top"><p class="src"><a name="v:bombaSpot" class="def">bombaSpot</a> :: [String] -&gt; String -&gt; Bool</p><div class="doc"><p>Esta fun&#231;&#227;o averigua se h&#225; uma bomba nas cordenadas em que o jogador se encontra, dado que n&#227;o pode haver mais de uma bomba por c&#233;lula.</p></div></div><div class="top"><p class="src"><a name="v:numeroBombasP" class="def">numeroBombasP</a> :: [String] -&gt; String -&gt; Int</p><div class="doc"><p>A fun&#231;&#227;o <code>numerobombasP</code> verifica o n&#250;mero de bombas que um dado jogador j&#225; tem colocadas num mapa.</p></div></div><div class="top"><p class="src"><a name="v:replaceRows" class="def">replaceRows</a> :: [String] -&gt; Char -&gt; [String]</p><div class="doc"><p>A fun&#231;&#227;o <code>replaceRows</code> &#233; o &quot;cora&#231;&#227;o&quot; da nossa solu&#231;&#227;o para esta tarefa, dado que &#233; ela que reescreve o mapa quandouma jogada &#233; feita, ao eliminar</p><p><code>Strings</code> de powerups que tenham sido apanhados na jogada, adicionando powerups a jogadores, reescrevedo as coordenadas dos mesmos, e tamb&#233;m adicionando</p><p>bombas, no caso de ser essa a jogada. </p></div></div><div class="top"><p class="src"><a name="v:pOrden" class="def">pOrden</a> :: String -&gt; Int</p><div class="doc"><p>Esta pequena fun&#231;&#227;o traduz a fun&#231;&#227;o <code>pOrdenSt</code> num <code>Int</code>, de forma a podermos trabalhar com esta informa&#231;&#227;o em &#237;ndices, por exemplo.</p></div></div><div class="top"><p class="src"><a name="v:pAbcis" class="def">pAbcis</a> :: String -&gt; Int</p><div class="doc"><p>O papel desempenhado pela <code>pAbcis</code> &#233; an&#225;logo ao da <code>pOrden</code>, mas diz respeito &#224; abcissa de um dado objeto (e.g. jogador, bomba, power up..)</p></div></div><div class="top"><p class="src"><a name="v:pAbcisSt" class="def">pAbcisSt</a> :: String -&gt; String</p><div class="doc"><p>Esta fun&#231;&#227;o obtem a parte da string correspondente a um jogador, ou outro objeto com coordenadas, em que se encontra a informa&#231;&#227;o sobre a abcissa</p><p>das coordenadas desse mesmo objeto. Como esta informa&#231;&#227;o come&#231;a sempre no 3&#186; caracter de cada string, apenas temos de considerar o qu&#227;o grande &#233; o</p><p>n&#250;mero relativo a esta mesma coordenada.</p></div></div><div class="top"><p class="src"><a name="v:pOrdenSt" class="def">pOrdenSt</a> :: String -&gt; String</p><div class="doc"><p>Apesar de esta fun&#231;&#227;o ter exaamente  mesmo papel que a <code>pAbcisSt</code>, a ordenada dos objetos vem em segundo lugar, e, por isso, os caracteres da string</p><p>que correspondem a esta informa&#231;&#227;o tamb&#233;m dependem da quantidade de caracteres utilizados para descrever a abcissa.</p></div></div><div class="top"><p class="src"><a name="v:right" class="def">right</a> :: String -&gt; String</p><div class="doc"><p>Esta fun&#231;&#227;o reescreve uma string de um jogador que se mova para a direita, somando 1 &#224; sua abcissa. Funcionando d forma semelhante, definimos tamb&#233;m as</p><p>fun&#231;&#245;es <code>left</code>, <code>up</code> e <code>down</code> </p><pre>
&gt;right &quot;0 1 1 ++&quot;
&quot;0 2 1 ++&quot;

&gt;down &quot;0 2 1 ++&quot;
&quot;0 2 2 ++&quot;

</pre></div></div><div class="top"><p class="src"><a name="v:left" class="def">left</a> :: String -&gt; String</p></div><div class="top"><p class="src"><a name="v:up" class="def">up</a> :: String -&gt; String</p></div><div class="top"><p class="src"><a name="v:down" class="def">down</a> :: String -&gt; String</p></div><div class="top"><p class="src"><a name="v:bomb" class="def">bomb</a> :: [String] -&gt; String -&gt; [String]</p><div class="doc"><p>A fun&#231;&#227;o <code>bomb</code> e respons&#225;vel por colocar uma bomba no mapa, recorrendo ao pr&#243;prio mapa e &#224; string relativa ao jogador que a colocou. </p></div></div><div class="top"><p class="src"><a name="v:bombSt" class="def">bombSt</a> :: String -&gt; String</p><div class="doc"><p>Esta fun&#231;&#227;o &#233; respons&#225;vel pela constru&#231;&#227;o da string com a informa&#231;&#227;o de uma nova bomba, a introduzir na lista de <code>Strings</code> com a informa&#231;&#227;o do jogo.</p><pre>
&gt;bombSt &quot;0 1 1 !&quot;
&quot;* 1 1 1 2 10&quot;

</pre></div></div><div class="top"><p class="src"><a name="v:numeroVezes" class="def">numeroVezes</a> :: Char -&gt; String -&gt; Int</p><div class="doc"><p>Esta fun&#231;&#227;o indica quantas vezes um dado char ocorre numa string, o que &#233; bastante &#250;til, por exemplo no casode querermos saber quandos power ups</p><p>de um certo tipo um jogador tem.</p></div></div><div class="top"><p class="src"><a name="v:removePowers" class="def">removePowers</a> :: [String] -&gt; String -&gt; [String]</p><div class="doc"><p>A fun&#231;&#227;o remove powers averigua se h&#225; power ups em coordenadas coincidentes com as do jogador (ap&#243;s se mover), removendo as strings </p><p>relativas a esse mesmo powrup, dado que foi apanhado pelo jogador.</p></div></div><div class="top"><p class="src"><a name="v:isPower" class="def">isPower</a> :: [String] -&gt; String -&gt; Char</p><div class="doc"><p>Esta fun&#231;&#227;o percorre a lista de <code>Strings</code> e, a partir das coordenadas da posi&#231;&#227;o para onde o jogador se vai mover, verifica se h&#225; algum powerup nessa localiza&#231;&#227;o</p><p>para o jogador apanhar. </p></div></div><div class="top"><p class="src"><a name="v:addPower" class="def">addPower</a> :: Char -&gt; String -&gt; String</p><div class="doc"><p>A fun&#231;&#227;o <code>addPower</code> adiciona a uma <code>String</code> de um jogador um dado powerup. </p></div></div><div class="top"><p class="src"><a name="v:startPowers" class="def">startPowers</a> :: String -&gt; Int</p><div class="doc"><p>A <code>startPowers</code>, a partir de uma <code>String</code> (relativa a um jogador) define o n&#250;mero de caracteres que v&#234;m antes do come&#231;o da informa&#231;&#227;o que diz respeito aos powerups.</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.16.1</p></div></body></html>